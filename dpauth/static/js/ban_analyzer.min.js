(()=>{function s(u,o={},...d){let i=document.createElement(u);for(let[n,a]of Object.entries(o))n==="onclick"?i.onclick=a:i.setAttribute(n,a);return d.forEach(n=>{typeof n=="string"&&(n=document.createTextNode(n)),i.appendChild(n)}),i}(function(){"use strict";let u=document.querySelector("#ban-analyzer-input"),o=document.querySelector("#ban-analyzer-results");function d(e){let t=/\b[0-9]+;[0-9a-f:\.]+;(.+?):?\s+{/.exec(e);if(t)return t[1];let r=/\b[0-9]+;(.+?):?\s+{/.exec(e);return r?r[1]:""}function i(e){return e==="android"?"Android":e==="emscripten"?"Browser":e==="linux"?"Linux":e==="darwin"?"macOS":e==="winnt"?"Windows":e?`${e}`:""}function n(e){return e?`${e}`.replace(/^::ffff:/,""):""}function a(e){if(e){let t=/^drawpile.net:([0-9]+)$/.exec(`${e}`);if(t)return t[1]}return""}function l(e){let t=d(e);for(;;){let r=e.indexOf("{");if(r===-1)return null;e=e.substr(r);try{let c=JSON.parse(e);return{os:i(c.os),username:t,address:n(c.address),sid:c.s||"",userId:a(c.auth_id)}}catch(c){console.error(e,c)}e=e.substr(1)}}function p(e,t){for(let r of e)if(t.os===r.os&&t.username===r.username&&t.address===r.address&&t.sid===r.sid&&t.userId===r.userId)return!0;return!1}function f(){let e=[];for(let t of u.value.split(`
`))try{let r=l(t.trim());r&&!p(e,r)&&e.push(r)}catch(r){console.error(t,r)}if(o.innerHTML="",e.length===0)o.appendChild(s("tr",{},s("td",{class:"is-italic",colspan:"4"},"Nothing here. Paste logs into the field above.")));else for(let t of e)o.appendChild(s("tr",{},s("td",{},t.os),s("td",{},t.username),s("td",{},t.address),s("td",{},t.sid),s("td",{},t.userId)))}u.addEventListener("input",f),f()})();})();
