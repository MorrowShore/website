(()=>{var L,d,le,Ne,E,ie,ue,B,Ae,P={},X=[],Fe=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function C(t,e){for(var n in e)t[n]=e[n];return t}function fe(t){var e=t.parentNode;e&&e.removeChild(t)}function K(t,e,n){var _,i,o,s={};for(o in e)o=="key"?_=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?L.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return F(t,s,_,i,null)}function F(t,e,n,_,i){var o={type:t,props:e,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:i??++le,__i:-1,__u:0};return i==null&&d.vnode!=null&&d.vnode(o),o}function V(t){return t.children}function M(t,e){this.props=t,this.context=e}function H(t,e){if(e==null)return t.__?H(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?H(t):null}function Me(t,e,n){var _,i=t.__v,o=i.__e,s=t.__P;if(s)return(_=C({},i)).__v=i.__v+1,d.vnode&&d.vnode(_),Q(s,_,i,t.__n,s.ownerSVGElement!==void 0,32&i.__u?[o]:null,e,o??H(i),!!(32&i.__u),n),_.__.__k[_.__i]=_,_.__d=void 0,_.__e!=o&&pe(_),_}function pe(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return pe(t)}}function re(t){(!t.__d&&(t.__d=!0)&&E.push(t)&&!R.__r++||ie!==d.debounceRendering)&&((ie=d.debounceRendering)||ue)(R)}function R(){var t,e,n,_=[],i=[];for(E.sort(B);t=E.shift();)t.__d&&(n=E.length,e=Me(t,_,i)||e,n===0||E.length>n?(G(_,e,i),i.length=_.length=0,e=void 0,E.sort(B)):e&&d.__c&&d.__c(e,X));e&&G(_,e,i),R.__r=0}function de(t,e,n,_,i,o,s,c,a,l,f){var r,p,u,v,k,y=_&&_.__k||X,h=e.length;for(n.__d=a,Re(n,e,y),a=n.__d,r=0;r<h;r++)(u=n.__k[r])!=null&&typeof u!="boolean"&&typeof u!="function"&&(p=u.__i===-1?P:y[u.__i]||P,u.__i=r,Q(t,u,p,i,o,s,c,a,l,f),v=u.__e,u.ref&&p.ref!=u.ref&&(p.ref&&Y(p.ref,null,u),f.push(u.ref,u.__c||v,u)),k==null&&v!=null&&(k=v),65536&u.__u||p.__k===u.__k?a=he(u,a,t):typeof u.type=="function"&&u.__d!==void 0?a=u.__d:v&&(a=v.nextSibling),u.__d=void 0,u.__u&=-196609);n.__d=a,n.__e=k}function Re(t,e,n){var _,i,o,s,c,a=e.length,l=n.length,f=l,r=0;for(t.__k=[],_=0;_<a;_++)(i=t.__k[_]=(i=e[_])==null||typeof i=="boolean"||typeof i=="function"?null:typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?F(null,i,null,null,i):J(i)?F(V,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?F(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i)!=null?(i.__=t,i.__b=t.__b+1,c=Le(i,n,s=_+r,f),i.__i=c,o=null,c!==-1&&(f--,(o=n[c])&&(o.__u|=131072)),o==null||o.__v===null?(c==-1&&r--,typeof i.type!="function"&&(i.__u|=65536)):c!==s&&(c===s+1?r++:c>s?f>a-s?r+=c-s:r--:r=c<s&&c==s-1?c-s:0,c!==_+r&&(i.__u|=65536))):(o=n[_])&&o.key==null&&o.__e&&(o.__e==t.__d&&(t.__d=H(o)),z(o,o,!1),n[_]=null,f--);if(f)for(_=0;_<l;_++)(o=n[_])!=null&&!(131072&o.__u)&&(o.__e==t.__d&&(t.__d=H(o)),z(o,o))}function he(t,e,n){var _,i;if(typeof t.type=="function"){for(_=t.__k,i=0;_&&i<_.length;i++)_[i]&&(_[i].__=t,e=he(_[i],e,n));return e}t.__e!=e&&(n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Le(t,e,n,_){var i=t.key,o=t.type,s=n-1,c=n+1,a=e[n];if(a===null||a&&i==a.key&&o===a.type)return n;if(_>(a!=null&&!(131072&a.__u)?1:0))for(;s>=0||c<e.length;){if(s>=0){if((a=e[s])&&!(131072&a.__u)&&i==a.key&&o===a.type)return s;s--}if(c<e.length){if((a=e[c])&&!(131072&a.__u)&&i==a.key&&o===a.type)return c;c++}}return-1}function se(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Fe.test(e)?n:n+"px"}function A(t,e,n,_,i){var o;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof _=="string"&&(t.style.cssText=_=""),_)for(e in _)n&&e in n||se(t.style,e,"");if(n)for(e in n)_&&n[e]===_[e]||se(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=n,n?_?n.u=_.u:(n.u=Date.now(),t.addEventListener(e,o?ce:ae,o)):t.removeEventListener(e,o?ce:ae,o);else{if(i)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e!=="rowSpan"&&e!=="colSpan"&&e!=="role"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,n))}}function ae(t){if(this.l){var e=this.l[t.type+!1];if(t.t){if(t.t<=e.u)return}else t.t=Date.now();return e(d.event?d.event(t):t)}}function ce(t){if(this.l)return this.l[t.type+!0](d.event?d.event(t):t)}function Q(t,e,n,_,i,o,s,c,a,l){var f,r,p,u,v,k,y,h,b,w,U,S,oe,D,q,x=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(a=!!(32&n.__u),o=[c=e.__e=n.__e]),(f=d.__b)&&f(e);e:if(typeof x=="function")try{if(h=e.props,b=(f=x.contextType)&&_[f.__c],w=f?b?b.props.value:f.__:_,n.__c?y=(r=e.__c=n.__c).__=r.__E:("prototype"in x&&x.prototype.render?e.__c=r=new x(h,w):(e.__c=r=new M(h,w),r.constructor=x,r.render=je),b&&b.sub(r),r.props=h,r.state||(r.state={}),r.context=w,r.__n=_,p=r.__d=!0,r.__h=[],r._sb=[]),r.__s==null&&(r.__s=r.state),x.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=C({},r.__s)),C(r.__s,x.getDerivedStateFromProps(h,r.__s))),u=r.props,v=r.state,r.__v=e,p)x.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(x.getDerivedStateFromProps==null&&h!==u&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(h,w),!r.__e&&(r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(h,r.__s,w)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(r.props=h,r.state=r.__s,r.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(N){N&&(N.__=e)}),U=0;U<r._sb.length;U++)r.__h.push(r._sb[U]);r._sb=[],r.__h.length&&s.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(h,r.__s,w),r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(u,v,k)})}if(r.context=w,r.props=h,r.__P=t,r.__e=!1,S=d.__r,oe=0,"prototype"in x&&x.prototype.render){for(r.state=r.__s,r.__d=!1,S&&S(e),f=r.render(r.props,r.state,r.context),D=0;D<r._sb.length;D++)r.__h.push(r._sb[D]);r._sb=[]}else do r.__d=!1,S&&S(e),f=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++oe<25);r.state=r.__s,r.getChildContext!=null&&(_=C(C({},_),r.getChildContext())),p||r.getSnapshotBeforeUpdate==null||(k=r.getSnapshotBeforeUpdate(u,v)),de(t,J(q=f!=null&&f.type===V&&f.key==null?f.props.children:f)?q:[q],e,n,_,i,o,s,c,a,l),r.base=e.__e,e.__u&=-161,r.__h.length&&s.push(r),y&&(r.__E=r.__=null)}catch(N){e.__v=null,a||o!=null?(e.__e=c,e.__u|=a?160:32,o[o.indexOf(c)]=null):(e.__e=n.__e,e.__k=n.__k),d.__e(N,e,n)}else o==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=Ve(n.__e,e,n,_,i,o,s,a,l);(f=d.diffed)&&f(e)}function G(t,e,n){for(var _=0;_<n.length;_++)Y(n[_],n[++_],n[++_]);d.__c&&d.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){d.__e(o,i.__v)}})}function Ve(t,e,n,_,i,o,s,c,a){var l,f,r,p,u,v,k,y=n.props,h=e.props,b=e.type;if(b==="svg"&&(i=!0),o!=null){for(l=0;l<o.length;l++)if((u=o[l])&&"setAttribute"in u==!!b&&(b?u.localName===b:u.nodeType===3)){t=u,o[l]=null;break}}if(t==null){if(b===null)return document.createTextNode(h);t=i?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,h.is&&h),o=null,c=!1}if(b===null)y===h||c&&t.data===h||(t.data=h);else{if(o=o&&L.call(t.childNodes),y=n.props||P,!c&&o!=null)for(y={},l=0;l<t.attributes.length;l++)y[(u=t.attributes[l]).name]=u.value;for(l in y)u=y[l],l=="children"||(l=="dangerouslySetInnerHTML"?r=u:l==="key"||l in h||A(t,l,null,u,i));for(l in h)u=h[l],l=="children"?p=u:l=="dangerouslySetInnerHTML"?f=u:l=="value"?v=u:l=="checked"?k=u:l==="key"||c&&typeof u!="function"||y[l]===u||A(t,l,u,y[l],i);if(f)c||r&&(f.__html===r.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(r&&(t.innerHTML=""),de(t,J(p)?p:[p],e,n,_,i&&b!=="foreignObject",o,s,o?o[0]:n.__k&&H(n,0),c,a),o!=null)for(l=o.length;l--;)o[l]!=null&&fe(o[l]);c||(l="value",v!==void 0&&(v!==t[l]||b==="progress"&&!v||b==="option"&&v!==y[l])&&A(t,l,v,y[l],!1),l="checked",k!==void 0&&k!==t[l]&&A(t,l,k,y[l],!1))}return t}function Y(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(_){d.__e(_,n)}}function z(t,e,n){var _,i;if(d.unmount&&d.unmount(t),(_=t.ref)&&(_.current&&_.current!==t.__e||Y(_,null,e)),(_=t.__c)!=null){if(_.componentWillUnmount)try{_.componentWillUnmount()}catch(o){d.__e(o,e)}_.base=_.__P=null,t.__c=void 0}if(_=t.__k)for(i=0;i<_.length;i++)_[i]&&z(_[i],e,n||typeof t.type!="function");n||t.__e==null||fe(t.__e),t.__=t.__e=t.__d=void 0}function je(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var _,i,o,s;d.__&&d.__(t,e),i=(_=typeof n=="function")?null:n&&n.__k||e.__k,o=[],s=[],Q(e,t=(!_&&n||e).__k=K(V,null,[t]),i||P,P,e.ownerSVGElement!==void 0,!_&&n?[n]:i?null:e.firstChild?L.call(e.childNodes):null,o,!_&&n?n:i?i.__e:e.firstChild,_,s),t.__d=void 0,G(o,t,s)}L=X.slice,d={__e:function(t,e,n,_){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,_||{}),s=i.__d),s)return i.__E=i}catch(c){t=c}throw t}},le=0,Ne=function(t){return t!=null&&t.constructor==null},M.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=C({},this.state),typeof t=="function"&&(t=t(C({},n),this.props)),t&&C(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),re(this))},M.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),re(this))},M.prototype.render=V,E=[],ue=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,B=function(t,e){return t.__v.__b-e.__v.__b},R.__r=0,Ae=0;var T,m,Z,me,O=0,Ce=[],j=[],g=d,ye=g.__b,ge=g.__r,be=g.diffed,ke=g.__c,$e=g.unmount,xe=g.__;function te(t,e){g.__h&&g.__h(m,t,O||e),O=0;var n=m.__H||(m.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({__V:j}),n.__[t]}function W(t){return O=1,Ie(Se,t)}function Ie(t,e,n){var _=te(T++,2);if(_.t=t,!_.__c&&(_.__=[n?n(e):Se(void 0,e),function(c){var a=_.__N?_.__N[0]:_.__[0],l=_.t(a,c);a!==l&&(_.__N=[l,_.__[1]],_.__c.setState({}))}],_.__c=m,!m.u)){var i=function(c,a,l){if(!_.__c.__H)return!0;var f=_.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!o||o.call(this,c,a,l);var r=!1;return f.forEach(function(p){if(p.__N){var u=p.__[0];p.__=p.__N,p.__N=void 0,u!==p.__[0]&&(r=!0)}}),!(!r&&_.__c.props===c)&&(!o||o.call(this,c,a,l))};m.u=!0;var o=m.shouldComponentUpdate,s=m.componentWillUpdate;m.componentWillUpdate=function(c,a,l){if(this.__e){var f=o;o=void 0,i(c,a,l),o=f}s&&s.call(this,c,a,l)},m.shouldComponentUpdate=i}return _.__N||_.__}function Ee(t,e){var n=te(T++,3);!g.__s&&He(n.__H,e)&&(n.__=t,n.i=e,m.__H.__h.push(n))}function ne(t){return O=5,Oe(function(){return{current:t}},[])}function Oe(t,e){var n=te(T++,7);return He(n.__H,e)?(n.__V=t(),n.i=e,n.__h=t,n.__V):n.__}function We(){for(var t;t=Ce.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(I),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],g.__e(e,t.__v)}}g.__b=function(t){m=null,ye&&ye(t)},g.__=function(t,e){e.__k&&e.__k.__m&&(t.__m=e.__k.__m),xe&&xe(t,e)},g.__r=function(t){ge&&ge(t),T=0;var e=(m=t.__c).__H;e&&(Z===m?(e.__h=[],m.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=j,n.__N=n.i=void 0})):(e.__h.forEach(I),e.__h.forEach(ee),e.__h=[],T=0)),Z=m},g.diffed=function(t){be&&be(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ce.push(e)!==1&&me===g.requestAnimationFrame||((me=g.requestAnimationFrame)||qe)(We)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==j&&(n.__=n.__V),n.i=void 0,n.__V=j})),Z=m=null},g.__c=function(t,e){e.some(function(n){try{n.__h.forEach(I),n.__h=n.__h.filter(function(_){return!_.__||ee(_)})}catch(_){e.some(function(i){i.__h&&(i.__h=[])}),e=[],g.__e(_,n.__v)}}),ke&&ke(t,e)},g.unmount=function(t){$e&&$e(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(_){try{I(_)}catch(i){e=i}}),n.__H=void 0,e&&g.__e(e,n.__v))};var we=typeof requestAnimationFrame=="function";function qe(t){var e,n=function(){clearTimeout(_),we&&cancelAnimationFrame(e),setTimeout(t)},_=setTimeout(n,100);we&&(e=requestAnimationFrame(n))}function I(t){var e=m,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),m=e}function ee(t){var e=m;t.__c=t.__(),m=e}function He(t,e){return!t||t.length!==e.length||e.some(function(n,_){return n!==t[_]})}function Se(t,e){return typeof e=="function"?e(t):e}var Te=function(t,e,n,_){var i;e[0]=0;for(var o=1;o<e.length;o++){var s=e[o++],c=e[o]?(e[0]|=s?1:2,n[e[o++]]):e[++o];s===3?_[0]=c:s===4?_[1]=Object.assign(_[1]||{},c):s===5?(_[1]=_[1]||{})[e[++o]]=c:s===6?_[1][e[++o]]+=c+"":s?(i=t.apply(c,Te(t,c,n,["",null])),_.push(i),c[0]?e[0]|=2:(e[o-2]=0,e[o]=i)):_.push(c)}return _},Pe=new Map;function Ue(t){var e=Pe.get(this);return e||(e=new Map,Pe.set(this,e)),(e=Te(this,e.get(t)||(e.set(t,e=function(n){for(var _,i,o=1,s="",c="",a=[0],l=function(p){o===1&&(p||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(0,p,s):o===3&&(p||s)?(a.push(3,p,s),o=2):o===2&&s==="..."&&p?a.push(4,p,0):o===2&&s&&!p?a.push(5,0,!0,s):o>=5&&((s||!p&&o===5)&&(a.push(o,0,s,i),o=6),p&&(a.push(o,p,0,i),o=6)),s=""},f=0;f<n.length;f++){f&&(o===1&&l(),l(f));for(var r=0;r<n[f].length;r++)_=n[f][r],o===1?_==="<"?(l(),a=[a],o=3):s+=_:o===4?s==="--"&&_===">"?(o=1,s=""):s=_+s[0]:c?_===c?c="":s+=_:_==='"'||_==="'"?c=_:_===">"?(l(),o=1):o&&(_==="="?(o=5,i=s,s=""):_==="/"&&(o<5||n[f][r+1]===">")?(l(),o===3&&(a=a[0]),o=a,(a=a[0]).push(2,0,o),o=0):_===" "||_==="	"||_===`
`||_==="\r"?(l(),o=2):s+=_),o===3&&s==="!--"&&(o=4,a=a[0])}return l(),a}(t)),e),arguments,[])).length>1?e:e[0]}var $=Ue.bind(K),Be=parseInt(document.querySelector("meta[name='max-users']").content);async function _e(t,e,n){let _=await fetch(t,{method:e,headers:{"Content-Type":"application/json","X-CSRFToken":getCookie("csrftoken")},body:n!==void 0?JSON.stringify(n):void 0});if(_.status===400){let i=await _.json(),o=Object.entries(i);throw o.length===1?new Error(o[0][1].join(", ")):new Error(i)}if(!_.ok)throw new Error(await _.text());return _}function Ge({user:t,refresh:e,setError:n,row:_,isMod:i,isGhost:o}){let s=ne(),[c,a]=W(!1),l=(p,u)=>()=>{a(p);let v=encodeURIComponent(t.name);_e(`/api/users/${v}/`,"PATCH",{[p]:u}).then(e).then(()=>n(null)).catch(n).finally(()=>a(!1))},f=()=>{a("remove");let p=encodeURIComponent(t.name);_e(`/api/users/${p}/`,"DELETE").then(e).then(()=>n(null)).catch(n).finally(()=>a(!1))},r=async p=>{if(p.target.files.length<1)return;let u=new FormData;u.append("avatar",p.target.files[0]),a("avatar");try{let v=encodeURIComponent(t.name),k=await fetch(`/api/users/${v}/`,{method:"PATCH",headers:{"X-CSRFToken":getCookie("csrftoken")},body:u});if(k.ok)n(null),e();else if(k.status===400){let y=await k.json(),h=Object.entries(y);h.length===1?n(new Error(h[0][1].join(", "))):n(new Error(y))}else n(new Error(await k.text()))}finally{a(!1)}};return $`<div class="tile is-child box">
    <article class="media">
      <div class="media-left">
        <figure class="image is-64x64">
          ${t.avatar?$`<img src="${t.avatar}" alt="" />`:$`<span class="avatar-placeholder"></span>`}
        </figure>
      </div>
      <div class="media-content">
        <div class="content">
          <p>
            <b class="button is-static">${t.name}</b>
            ${i&&$` <button
              class="button is-text ${c==="is_mod"?"is-loading":""}"
              onclick=${l("is_mod",!t.is_mod)}
            >
              <span class="icon"
                ><i class="fas fa-${t.is_mod?"check-":""}circle"></i
              ></span>
              <span>Enable moderator role when available</span>
            </button>`}
            ${i&&o&&t.is_mod&&$` <button
              class="button is-text ${c==="is_ghost"?"is-loading":""}"
              onclick=${l("is_ghost",!t.is_ghost)}
            >
              <span class="icon"
                ><i class="fas fa-${t.is_ghost?"check-":""}circle"></i
              ></span>
              <span>Enable ghost role when available</span>
            </button>`}
          </p>
          <p>
            ${!t.is_primary&&$`
              <button
                class="button is-text ${c==="is_primary"?"is-loading":""}"
                onclick=${l("is_primary",!0)}
              >
                <span class="icon"><i class="fas fa-arrow-up"></i></span>
                <span>Make primary</span>
              </button>
              <button
                class="button is-text ${c==="remove"?"is-loading":""}"
                onclick=${f}
              >
                <span class="icon"><i class="fas fa-times"></i></span>
                <span>Remove</span>
              </button>
            `}
            <input
              ref=${s}
              class="is-hidden"
              type="file"
              accept="image/png,image/jpeg"
              onchange=${r}
            />
            <button
              class="button is-text  ${c==="avatar"?"is-loading":""}"
              onclick=${p=>s.current.click()}
            >
              <span class="icon"><i class="fas fa-upload"></i></span>
              <span>Set avatar</span>
            </button>
            ${t.avatar&&$` <button
              class="button is-text  ${c==="avatar"?"is-loading":""}"
              onclick=${l("avatar",null)}
            >
              <span class="icon"><i class="fas fa-eraser"></i></span>
              <span>Remove avatar</span>
            </button>`}
          </p>
        </div>
      </div>
    </article>
  </div>`}function ze({users:t,refresh:e,setError:n,isMod:_,isGhost:i}){let o=ne(),s="";return t.length<Be&&(s=$`<div class="tile is-child box">
      <article class="media">
        <div class="media-left">
          <figure class="image is-64x64"></figure>
        </div>
        <div class="media-content">
          <div class="field has-addons">
            <div class="control">
              <input
                type="text"
                class="input"
                placeholder="Username"
                ref=${o}
              />
            </div>
            <div class="control">
              <button class="button is-info" onclick=${()=>{_e("/api/users/","POST",{name:o.current.value}).then(e).then(()=>n(null)).catch(n)}}>Add</button>
            </div>
          </div>
        </div>
      </article>
    </div>`),$`<div class="tile is-ancestor is-vertical">
    ${t.map((c,a)=>$`<${Ge}
          user=${c}
          refresh=${e}
          setError=${n}
          row=${a}
          isMod=${_}
          isGhost=${i}
        />`)}
    ${s}
  </div>`}function Xe({permissions:t}){let e=t.indexOf("MOD")!==-1,n=t.indexOf("GHOST")!==-1,[_,i]=W(null),[o,s]=W(null),c=()=>{fetch("/api/users/").then(a=>a.json()).then(a=>a.sort((l,f)=>l.is_primary*-9999+f.is_primary*9999+l.name.localeCompare(f.name))).then(a=>i(a)).catch(a=>s(a))};return Ee(c,[]),$`
    ${o!==null&&$`<p class="notification is-danger">${o.toString()}</p>`}
    ${_===null&&o===null&&$`<p>Loading...</p>`}
    ${_!==null&&$`<${ze}
      users=${_}
      refresh=${c}
      setError=${s}
      isMod=${e}
      isGhost=${n}
    />`}
  `}var De=document.getElementById("username-list"),Je=De.dataset.permissions;ve($`<${Xe} permissions=${Je} />`,De);})();
